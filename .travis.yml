---
sudo: false
language: python
matrix:
  include:
    - os: linux
      language: generic
      sudo: false
      env: TOXENV=py35-64-pyqt5
    #- os: linux
    #  dist: trusty
    #  language: generic
    #  sudo: true
    #  env: TOXENV=py35-64-pyqt5
    #- os: linux
    #  language: generic
    #  sudo: true
    #  env: TOXENV=py35-32-pyqt5
    - os: osx
      language: generic
      sudo: false
      env: TOXENV=py35-64-pyqt5
    #- os: linux
    #  sudo: false
    #  python: 3.5
    #  env: TOXENV=docs
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - pandoc
      - build-essential
      - curl
      - git
      - mercurial
      - python-setuptools
      - ruby
      - rubygems
      - make
      - libssl-dev
      - zlib1g-dev
      - libbz2-dev
      - libreadline-dev
      - libsqlite3-dev
      - libgdbm-dev
      - liblzma-dev
      - libncurses5-dev
      - libncursesw5-dev
      - wget
      - curl
      - llvm
      - xz-utils
      - gcc-5
      - g++-5
      - libxcb-composite0
      - libxcb-composite0-dev
      - libxcb-cursor-dev
      - libxcb-cursor0
      - libxcb-damage0
      - libxcb-damage0-dev
      - libxcb-doc
      - libxcb-dpms0
      - libxcb-dpms0-dev
      - libxcb-dri2-0
      - libxcb-dri2-0-dev
      - libxcb-dri3-0
      - libxcb-dri3-dev
      - libxcb-ewmh-dev
      - libxcb-ewmh1-dev
      - libxcb-ewmh2
      - libxcb-glx0
      - libxcb-glx0-dev
      - libxcb-icccm4
      - libxcb-icccm4-dev
      - libxcb-image0
      - libxcb-image0-dev
      - libxcb-keysyms1
      - libxcb-keysyms1-dev
      - libxcb-present-dev
      - libxcb-present0
      - libxcb-randr0
      - libxcb-randr0-dev
      - libxcb-record0
      - libxcb-record0-dev
      - libxcb-render-util0
      - libxcb-render-util0-dev
      - libxcb-render0
      - libxcb-render0-dev
      - libxcb-res0
      - libxcb-res0-dev
      - libxcb-screensaver0
      - libxcb-screensaver0-dev
      - libxcb-shape0
      - libxcb-shape0-dev
      - libxcb-shm0
      - libxcb-shm0-dev
      - libxcb-sync-dev
      - libxcb-sync1
      - libxcb-util0
      - libxcb-util0-dev
      - libxcb-xevie0
      - libxcb-xevie0-dev
      - libxcb-xf86dri0
      - libxcb-xf86dri0-dev
      - libxcb-xfixes0
      - libxcb-xfixes0-dev
      - libxcb-xinerama0
      - libxcb-xinerama0-dev
      - libxcb-xkb-dev
      - libxcb-xkb1
      - libxcb-xprint0
      - libxcb-xprint0-dev
      - libxcb-xtest0
      - libxcb-xtest0-dev
      - libxcb-xv0
      - libxcb-xv0-dev
      - libxcb-xvmc0
      - libxcb-xvmc0-dev
      - libxcb1
      - libxcb1-dev
      - libxcb1-udeb

before_install:
  - if [[ "$TRAVIS_OS_NAME" = "osx" ]]; then brew install bash && alias bash=/usr/local/Cellar/bash/4.4/bin/bash; fi
  - source .travis/env.sh
  - pushd .travis && bash setup_packages.sh && popd
  - pushd .travis && bash gist.sh && popd
  - pushd .travis && bash pyenv.sh && popd
  - eval "$(pyenv init -)" && eval "$(pyenv virtualenv-init -)"
  - pushd .travis && bash qt.sh && popd
  - pushd .travis && bash doit.sh && popd
install:
  - doit
script:
  - tox
